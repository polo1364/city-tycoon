<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åŸå¸‚è³‡æœ¬æˆ°ï½œWeb ç‰ˆï¼ˆå¤šæª”æ¡ˆ v2.3.1ï¼‰</title>
  <link rel="stylesheet" href="style.css?v=232" />
</head>
<body>
  <header>
    <h1>åŸå¸‚è³‡æœ¬æˆ° <span class="tag">Web ç‰ˆï¼ˆv2.3.1ï¼‰</span></h1>
    <div class="controls">
      <button id="btnRoll" class="primary">ğŸ² æ“²éª°</button>
      <button id="btnBuy" class="ok" disabled>è²·ä¸‹åœ°ç”¢</button>
      <button id="btnSkip" disabled>ç•¥é/å–æ¶ˆ</button>
      <button id="btnEnd" disabled>çµæŸå›åˆ</button>
      <button id="btnAssets">è³‡ç”¢ / å»ºå±‹</button>
      <button id="btnSave">å­˜æª”</button>
      <button id="btnLoad">è®€æª”</button>
      <button id="btnReset" class="danger">é‡æ–°é–‹å§‹</button>
    </div>
  </header>

  <main>
    <section class="board-wrap">
      <section class="board" id="board">
        <div id="toast" class="toast hidden"></div>
      </section>
    </section>

    <aside class="sidebar">
      <div class="panel status">
        <h2>ç•¶å‰ç©å®¶</h2>
        <div id="currentPlayer"></div>
        <div class="dice">
          <div id="dice1" class="die">-</div>
          <div id="dice2" class="die">-</div>
        </div>
        <div id="turnInfo" class="turninfo"></div>
      </div>
      <div class="panel players" id="playersPanel"></div>
      <div class="panel log"><h2>æˆ°æ³ç´€éŒ„</h2><div id="log"></div></div>
    </aside>
  </main>

  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <div id="modalBody"></div>
      <div class="modal-actions">
        <button id="modalOk" class="ok">ç¢ºå®š</button>
        <button id="modalCancel">å–æ¶ˆ</button>
      </div>
    </div>
  </div>

  <div id="assetsPanel" class="drawer hidden">
    <div class="drawer-content">
      <div class="drawer-header">
        <h3>è³‡ç”¢èˆ‡å»ºå±‹</h3>
        <button id="btnCloseAssets">âœ•</button>
      </div>
      <div id="assetsBody"></div>
    </div>
  </div>

  <footer>
    <p>ğŸ§ª v2.3.1ï¼šåŠ å…¥ã€Œè¼‰å…¥åµæ¸¬èˆ‡å¾Œå‚™è¼‰å…¥ã€ï¼Œè‹¥ <code>game-v23.js</code> éºå¤±/è¢«å¿«å–é˜»æ“‹ï¼Œæœƒé¡¯ç¤ºç´…è‰²åŸå› æç¤ºä¸¦è‡ªå‹•å˜—è©¦ <code>?v=timestamp</code> é‡è¼‰ã€‚</p>
  </footer>

  <div id="diag" class="">ğŸš€ æ­£åœ¨è¼‰å…¥ v2.3.1 è…³æœ¬â€¦</div>

  <!-- ä¸»è…³æœ¬ï¼›è‹¥éºå¤±ï¼Œonerror æœƒæ¨™ç´…æç¤º -->
  <script src="game-v23.js" defer onerror="(function(){var d=document.getElementById('diag');d.className='err';d.textContent='ğŸš¨ ç„¡æ³•è¼‰å…¥ game-v23.jsï¼ˆæª”æ¡ˆä¸åœ¨åŒç›®éŒ„æˆ–æª”åå¤§å°å¯«ä¸ç¬¦ï¼‰ã€‚å·²å˜—è©¦å‚™æ´è¼‰å…¥â€¦';})();"></script>

  <!-- å¾Œå‚™è¼‰å…¥å™¨ï¼šæª¢æ¸¬ 1.2s å…§ä»æœªå°±ç·’å‰‡æ”¹ç”¨ ?v=timestamp -->
  <script>
  (function(){
    var diag=document.getElementById('diag');
    function ok(msg){ diag.className=''; diag.textContent='âœ… '+msg; }
    function fail(msg){ diag.className='err'; diag.textContent='ğŸš¨ '+msg; }

    var tried=false;
    function ensure(){
      if (window.__TYCOON_V23_READY__) { ok('v2.3 è…³æœ¬å°±ç·’ã€‚'); return; }
      if (!tried){
        tried=true;
        var s=document.createElement('script');
        s.src='game-v23.js?v='+(Date.now());
        s.defer=true;
        s.onerror=function(){ fail('å‚™æ´è¼‰å…¥ä¹Ÿå¤±æ•—ã€‚è«‹ç¢ºèªå·²ä¸Šå‚³ game-v23.js åˆ°èˆ‡ index.html ç›¸åŒè³‡æ–™å¤¾ï¼Œä¸”æª”åå¤§å°å¯«å®Œå…¨ä¸€è‡´ã€‚'); };
        document.body.appendChild(s);
        setTimeout(ensure, 1500);
      }else{
        fail('è…³æœ¬æœªè¼‰å…¥ï¼ˆå¯èƒ½æ˜¯è·¯å¾‘æˆ–å¿«å–å•é¡Œï¼‰ã€‚è«‹æ¸…é™¤ç€è¦½å™¨å¿«å–ï¼Œæˆ–æª¢æŸ¥æª”æ¡ˆè·¯å¾‘/å¤§å°å¯«ã€‚');
      }
    }
    setTimeout(ensure, 1200);
  })();
  </script>
</body>
</html>
